if MEMESPASS == nil then
	MEMESPASS = class({})
end

MEMESPASS_REWARD_TABLE = {}
MEMESPASS_REWARD_NAME = {}
MEMESPASS_REWARD_TABLE_FREE = {}
MEMESPASS_REWARD_NAME_FREE = {}


MEMESPASS_REWARD_TABLE_FREE[1] =  "no_reward"
MEMESPASS_REWARD_TABLE_FREE[2] =  "bp_xp_boost_1"
MEMESPASS_REWARD_TABLE_FREE[3] =  "no_reward"
MEMESPASS_REWARD_TABLE_FREE[4] =  "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[5] =  "free_reward5" 
MEMESPASS_REWARD_TABLE_FREE[6] =  "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[7] =  "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[8] =  "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[9] =  "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[10] = "free_reward10"
MEMESPASS_REWARD_TABLE_FREE[11] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[12] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[13] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[14] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[15] = "free_reward15" 
MEMESPASS_REWARD_TABLE_FREE[16] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[17] = "bp_xp_boost_2" 
MEMESPASS_REWARD_TABLE_FREE[18] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[19] = "free_reward19" 
MEMESPASS_REWARD_TABLE_FREE[20] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[21] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[22] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[23] = "free_reward23" 
MEMESPASS_REWARD_TABLE_FREE[24] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[25] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[26] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[27] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[28] = "free_reward28" 
MEMESPASS_REWARD_TABLE_FREE[29] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[30] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[31] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[32] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[33] = "bp_xp_boost_3" 
MEMESPASS_REWARD_TABLE_FREE[34] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[35] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[36] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[37] = "free_reward37" 
MEMESPASS_REWARD_TABLE_FREE[38] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[39] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[40] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[41] = "free_reward41" 
MEMESPASS_REWARD_TABLE_FREE[42] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[43] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[44] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[45] = "free_reward45" 
MEMESPASS_REWARD_TABLE_FREE[46] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[47] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[48] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[49] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[50] = "free_reward50" 
MEMESPASS_REWARD_TABLE_FREE[51] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[52] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[53] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[54] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[55] = "free_reward55" 
MEMESPASS_REWARD_TABLE_FREE[56] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[57] = "bp_xp_boost_4" 
MEMESPASS_REWARD_TABLE_FREE[58] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[59] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[60] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[61] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[62] = "free_reward62" 
MEMESPASS_REWARD_TABLE_FREE[63] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[64] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[65] = "free_reward65" 
MEMESPASS_REWARD_TABLE_FREE[66] = "free_reward66" 
MEMESPASS_REWARD_TABLE_FREE[67] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[68] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[69] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[70] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[71] = "free_reward71" 
MEMESPASS_REWARD_TABLE_FREE[72] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[73] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[74] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[75] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[76] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[77] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[78] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[79] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[80] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[81] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[82] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[83] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[84] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[85] = "free_reward85" 
MEMESPASS_REWARD_TABLE_FREE[86] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[87] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[88] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[89] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[90] = "free_reward90" 
MEMESPASS_REWARD_TABLE_FREE[91] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[92] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[93] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[94] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[95] = "free_reward95" 
MEMESPASS_REWARD_TABLE_FREE[96] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[97] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[98] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[99] = "no_reward" 
MEMESPASS_REWARD_TABLE_FREE[100] = "free_reward100" 








MEMESPASS_REWARD_TABLE[1] = "reward1" 
MEMESPASS_REWARD_TABLE[2] = "reward2" 
MEMESPASS_REWARD_TABLE[3] = "reward3" 
MEMESPASS_REWARD_TABLE[4] = "token1" 
MEMESPASS_REWARD_TABLE[5] = "reward5" 
MEMESPASS_REWARD_TABLE[6] = "reward6" 
MEMESPASS_REWARD_TABLE[7] = "reward7" 
MEMESPASS_REWARD_TABLE[8] = "reward8" 
MEMESPASS_REWARD_TABLE[9] = "reward9" 
MEMESPASS_REWARD_TABLE[10] = "reward10" 
MEMESPASS_REWARD_TABLE[11] = "token2" 
MEMESPASS_REWARD_TABLE[12] = "reward12" 
MEMESPASS_REWARD_TABLE[13] = "no_reward" 
MEMESPASS_REWARD_TABLE[14] = "reward14" 
MEMESPASS_REWARD_TABLE[15] = "no_reward" 
MEMESPASS_REWARD_TABLE[16] = "reward16" 
MEMESPASS_REWARD_TABLE[17] = "no_reward" 
MEMESPASS_REWARD_TABLE[18] = "reward18" 
MEMESPASS_REWARD_TABLE[19] = "reward19" 
MEMESPASS_REWARD_TABLE[20] = "reward20" 
MEMESPASS_REWARD_TABLE[21] = "reward21" 
MEMESPASS_REWARD_TABLE[22] = "reward22" 
MEMESPASS_REWARD_TABLE[23] = "reward23" 
MEMESPASS_REWARD_TABLE[24] = "reward24" 
MEMESPASS_REWARD_TABLE[25] = "reward25" 
MEMESPASS_REWARD_TABLE[26] = "no_reward" 
MEMESPASS_REWARD_TABLE[27] = "no_reward" 
MEMESPASS_REWARD_TABLE[28] = "token3" 
MEMESPASS_REWARD_TABLE[29] = "reward29" 
MEMESPASS_REWARD_TABLE[30] = "reward30" 
MEMESPASS_REWARD_TABLE[31] = "reward31" 
MEMESPASS_REWARD_TABLE[32] = "reward32" 
MEMESPASS_REWARD_TABLE[33] = "reward33" 
MEMESPASS_REWARD_TABLE[34] = "token4" 
MEMESPASS_REWARD_TABLE[35] = "reward35" 
MEMESPASS_REWARD_TABLE[36] = "no_reward" 
MEMESPASS_REWARD_TABLE[37] = "no_reward" 
MEMESPASS_REWARD_TABLE[38] = "reward38" 
MEMESPASS_REWARD_TABLE[39] = "reward39" 
MEMESPASS_REWARD_TABLE[40] = "reward40" 
MEMESPASS_REWARD_TABLE[41] = "reward41" 
MEMESPASS_REWARD_TABLE[42] = "token5" 
MEMESPASS_REWARD_TABLE[43] = "reward43" 
MEMESPASS_REWARD_TABLE[44] = "no_reward" 
MEMESPASS_REWARD_TABLE[45] = "reward45" 
MEMESPASS_REWARD_TABLE[46] = "reward46" 
MEMESPASS_REWARD_TABLE[47] = "reward47" 
MEMESPASS_REWARD_TABLE[48] = "reward48" 
MEMESPASS_REWARD_TABLE[49] = "reward49" 
MEMESPASS_REWARD_TABLE[50] = "reward50" 
MEMESPASS_REWARD_TABLE[51] = "token6" 
MEMESPASS_REWARD_TABLE[52] = "reward52" 
MEMESPASS_REWARD_TABLE[53] = "reward53" 
MEMESPASS_REWARD_TABLE[54] = "no_reward" 
MEMESPASS_REWARD_TABLE[55] = "reward55" 
MEMESPASS_REWARD_TABLE[56] = "reward56" 
MEMESPASS_REWARD_TABLE[57] = "no_reward" 
MEMESPASS_REWARD_TABLE[58] = "reward58" 
MEMESPASS_REWARD_TABLE[59] = "reward59" 
MEMESPASS_REWARD_TABLE[60] = "reward60" 
MEMESPASS_REWARD_TABLE[61] = "reward61" 
MEMESPASS_REWARD_TABLE[62] = "token7" 
MEMESPASS_REWARD_TABLE[63] = "reward63" 
MEMESPASS_REWARD_TABLE[64] = "reward64" 
MEMESPASS_REWARD_TABLE[65] = "reward65" 
MEMESPASS_REWARD_TABLE[66] = "no_reward" 
MEMESPASS_REWARD_TABLE[67] = "reward67" 
MEMESPASS_REWARD_TABLE[68] = "reward68" 
MEMESPASS_REWARD_TABLE[69] = "reward69" 
MEMESPASS_REWARD_TABLE[70] = "reward70" 
MEMESPASS_REWARD_TABLE[71] = "token8" 
MEMESPASS_REWARD_TABLE[72] = "reward72" 
MEMESPASS_REWARD_TABLE[73] = "reward73" 
MEMESPASS_REWARD_TABLE[74] = "reward74" 
MEMESPASS_REWARD_TABLE[75] = "reward75" 
MEMESPASS_REWARD_TABLE[76] = "no_reward" 
MEMESPASS_REWARD_TABLE[77] = "reward77" 
MEMESPASS_REWARD_TABLE[78] = "no_reward" 
MEMESPASS_REWARD_TABLE[79] = "reward79" 
MEMESPASS_REWARD_TABLE[80] = "reward80" 
MEMESPASS_REWARD_TABLE[81] = "reward81" 
MEMESPASS_REWARD_TABLE[82] = "reward82" 
MEMESPASS_REWARD_TABLE[83] = "token9" 
MEMESPASS_REWARD_TABLE[84] = "reward84" 
MEMESPASS_REWARD_TABLE[85] = "reward85" 
MEMESPASS_REWARD_TABLE[86] = "reward86" 
MEMESPASS_REWARD_TABLE[87] = "reward87" 
MEMESPASS_REWARD_TABLE[88] = "reward88" 
MEMESPASS_REWARD_TABLE[89] = "reward89" 
MEMESPASS_REWARD_TABLE[90] = "reward90" 
MEMESPASS_REWARD_TABLE[91] = "reward91" 
MEMESPASS_REWARD_TABLE[92] = "reward92" 
MEMESPASS_REWARD_TABLE[93] = "reward93" 
MEMESPASS_REWARD_TABLE[94] = "token10" 
MEMESPASS_REWARD_TABLE[95] = "reward95" 
MEMESPASS_REWARD_TABLE[96] = "reward96" 
MEMESPASS_REWARD_TABLE[97] = "reward97" 
MEMESPASS_REWARD_TABLE[98] = "reward98" 
MEMESPASS_REWARD_TABLE[99] = "reward99" 
MEMESPASS_REWARD_TABLE[100] = "reward100" 

-- Питомцы
MEMESPASS_PREMIUM_PETS = {}
MEMESPASS_PREMIUM_PETS[1] = {
	effect = "particles/econ/courier/courier_roshan_darkmoon/courier_roshan_darkmoon.vpcf", model = "models/courier/baby_rosh/babyroshan.vmdl", level = 9
}
MEMESPASS_PREMIUM_PETS[2] = {
	effect = "particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf", model = "models/courier/donkey_trio/mesh/donkey_trio.vmdl", level = 18
}
MEMESPASS_PREMIUM_PETS[3] = {
	effect = "particles/econ/courier/courier_mechjaw/courier_mechjaw_ambient.vpcf", model = "models/courier/mechjaw/mechjaw.vmdl", level = 27
}
MEMESPASS_PREMIUM_PETS[4] = {
	effect = "particles/econ/courier/courier_huntling_gold/courier_huntling_gold_ambient.vpcf", model = "models/courier/huntling/huntling.vmdl", level = 36	
}
MEMESPASS_PREMIUM_PETS[5] = {
	effect = "particles/econ/courier/courier_devourling/courier_devourling_ambient.vpcf", model = "models/items/courier/devourling/devourling.vmdl", level = 45
}
MEMESPASS_PREMIUM_PETS[6] = {
	effect = "particles/econ/courier/courier_seekling_gold/courier_seekling_gold_ambient.vpcf", model = "models/courier/seekling/seekling.vmdl", level = 54
}
MEMESPASS_PREMIUM_PETS[7] = {
	effect = "particles/econ/courier/courier_venoling/courier_venoling_ambient.vpcf", model = "models/courier/venoling/venoling.vmdl", level = 63
}
MEMESPASS_PREMIUM_PETS[8] = {
	effect = "particles/econ/courier/courier_amaterasu/courier_amaterasu_ambient.vpcf", model = "models/items/courier/amaterasu/amaterasu.vmdl", level = 69
}
MEMESPASS_PREMIUM_PETS[9] = {
	effect = "particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf", model = "models/items/courier/beaverknight_s2/beaverknight_s2.vmdl", level = 78
}
MEMESPASS_PREMIUM_PETS[10] = {
	effect = "particles/econ/courier/courier_nian/courier_nian_ambient.vpcf", model = "models/items/courier/nian_courier/nian_courier.vmdl", level = 84
}
MEMESPASS_PREMIUM_PETS[11] = {
	effect = "particles/econ/courier/courier_faceless_rex/cour_rex_flying.vpcf", model = "models/items/courier/faceless_rex/faceless_rex.vmdl", level = 93
}
MEMESPASS_PREMIUM_PETS[12] = {
	effect = "particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf", model = "models/pets/icewrack_wolf/icewrack_wolf.vmdl", level = 98
}
MEMESPASS_PREMIUM_PETS[13] = {
	effect = "particles/econ/courier/courier_minipudge/courier_minipudge_ambient.vpcf", model = "models/courier/minipudge/minipudge.vmdl", level = 105
}
MEMESPASS_PREMIUM_PETS[14] = {
	effect = "particles/econ/courier/courier_shagbark/courier_shagbark_ambient.vpcf", model = "models/items/courier/shagbark/shagbark.vmdl", level = 110
}
MEMESPASS_PREMIUM_PETS[15] = {
	effect = "particles/econ/courier/courier_ti10/courier_ti10_lvl6_dire_ambient.vpcf", model = "models/items/courier/courier_ti10_radiant/courier_ti10_radiant_lvl6/courier_ti10_radiant_lvl6.vmdl", level = 115
}
MEMESPASS_PREMIUM_PETS[16] = {
	effect = "particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf", model = "models/items/courier/mango_the_courier/mango_the_courier.vmdl", level = 115
}
MEMESPASS_PREMIUM_PETS[17] = {
	effect = "particles/econ/courier/courier_axolotl_ambient/courier_axolotl_ambient.vpcf", model = "models/items/courier/axolotl/axolotl.vmdl", level = 115
}
MEMESPASS_PREMIUM_PETS[18] = {
	effect = "particles/econ/courier/courier_devourling_gold/courier_devourling_gold_ambient.vpcf", model = "models/items/courier/teron/teron.vmdl", level = 115
}
MEMESPASS_PREMIUM_PETS[19] = {
	effect = "particles/econ/courier/courier_lockjaw/courier_lockjaw_ambient.vpcf", model = "models/courier/lockjaw/lockjaw.vmdl", level = 115
}

CustomNetTables:SetTableValue("memespass", "pets", { pets = MEMESPASS_PREMIUM_PETS})
CustomNetTables:SetTableValue("memespass", "rewards", {reward = MEMESPASS_REWARD_TABLE})
CustomNetTables:SetTableValue("freepass", "rewards", {reward = MEMESPASS_REWARD_TABLE_FREE})

for lvl,name in pairs (MEMESPASS_REWARD_TABLE) do
	MEMESPASS_REWARD_NAME[name] = lvl
end

for lvl,name in pairs (MEMESPASS_REWARD_TABLE_FREE) do
	MEMESPASS_REWARD_NAME_FREE[name] = lvl
end

function IsUnlockedInPass(id, reward)
	local table = CustomNetTables:GetTableValue("birzhainfo", tostring(id))
	if table then
		local hero_lvl = CustomNetTables:GetTableValue("birzhainfo", tostring(id)).bp_lvl
		if (hero_lvl or 0) >= MEMESPASS_REWARD_NAME[reward] and HasBirzhaPass(tostring(id)) then
			return true
		end
	end
	return nil
end

function IsUnlockedInPassFree(id, reward)
	local table = CustomNetTables:GetTableValue("birzhainfo", tostring(id))
	if table then
		local hero_lvl = CustomNetTables:GetTableValue("birzhainfo", tostring(id)).bp_lvl
		if (hero_lvl or 0) >= MEMESPASS_REWARD_NAME_FREE[reward] then
			return true
		end
	end
	return nil
end

function MEMESPASS:ChangePetPremium(ev)
	local id = ev.PlayerID
	local model = ev.model							
	local player =	PlayerResource:GetPlayer(id)
	if player then
		local hero = player:GetAssignedHero()
		if hero:GetUnitName() ~= "npc_dota_hero_wisp" then
			local pet = MEMESPASS.BIRZHA_PREMIUM_PET[tonumber(id)]
			if pet then
				pet:SetModel(model)
				pet:SetOriginalModel(model)
				if pet.particle then
					ParticleManager:DestroyParticle(pet.particle, true)
				end
				pet.particle = ParticleManager:CreateParticle(ev.effect, PATTACH_ABSORIGIN_FOLLOW, pet)
			else
				SpawnPetForHero(hero, model, ev.effect)
			end
		end
	end
end

function MEMESPASS:SelectVO(keys)
	local sounds = {
		"reward3",
		"reward5",
		"reward9",
		"free_reward10",
		"reward12",
		"reward18",
		"reward19",
		"reward24",
		"free_reward28",
		"reward32",
		"reward33",
		"reward39",
		"reward40",
		"reward41",
		"free_reward45",
		"reward46",
		"reward49",
		"reward50",
		"reward55",
		"reward58",
		"free_reward62",
		"reward64",
		"reward68",
		"reward70",
		"reward72",
		"reward75",
		"reward81",
		"reward84",
		"reward87",
		"free_reward90",
		"reward92",
		"reward93",
		"reward96",
		"reward97",
		"reward98",
		"reward99",
	}

	local sprays = {
		"reward2",
		"free_reward5",
		"reward6",
		"reward8",
		"reward16",
		"reward20",
		"reward25",
		"reward29",
		"free_reward37",
		"reward38",
		"reward43",
		"reward48",
		"reward53",
		"free_reward55",
		"reward63",
		"free_reward66",
		"reward69",
		"free_reward71",
		"reward79",
		"free_reward85",
		"reward86",
		"reward89",
		"free_reward100",
		"free_reward19",
	}

	local toys = {
		"free_reward50",
		"reward22",
		"reward74",
		"reward88",
	}

	local player=PlayerResource:GetPlayer(keys.PlayerID)

	if keys.free == 1 then
		if IsUnlockedInPassFree(keys.PlayerID, keys.num) then
			for _,sound in pairs(sounds) do
				if keys.num == sound then
					if player.sound_use == 1 then
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.sound_use = 1
						Timers:CreateTimer(10, function() player.sound_use = 0 end)
					end
					local chat = LoadKeyValues("scripts/chat_wheel_rewards.txt")
					EmitGlobalSound(keys.num)
					Say(PlayerResource:GetPlayer(keys.PlayerID), "___"..chat["battlepass_"..keys.num], false)
				end
			end

			for _,spray in pairs(sprays) do
				if keys.num == spray then
					if player.spray_use == 1 then 
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.spray_use = 1
						Timers:CreateTimer(10, function() player.spray_use = 0 end)
					end
					local spray = ParticleManager:CreateParticle("particles/birzhapass/"..keys.num..".vpcf", PATTACH_WORLDORIGIN, nil)
					ParticleManager:SetParticleControl( spray, 0, PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetOrigin() )
					ParticleManager:ReleaseParticleIndex( spray )
					PlayerResource:GetSelectedHeroEntity(keys.PlayerID):EmitSound("Spraywheel.Paint")
				end
			end

			for _,toy in pairs(toys) do
				if keys.num == toy then

					if player.toy_use == 1 then 				
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.toy_use = 1
						Timers:CreateTimer(20, function() player.toy_use = 0 end)
					end

					if keys.num == "free_reward50" then
						Item = CreateUnitByName("npc_dota_seasonal_cny_balloon", PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetAbsOrigin() + RandomVector(RandomFloat(0,100)), true, PlayerResource:GetSelectedHeroEntity(keys.PlayerID), nil, PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetTeamNumber())
					end
				end
			end
		else
			EmitSoundOnClient("General.Cancel", player)
		end
	end

	if keys.free == 0 then
		if IsUnlockedInPass(keys.PlayerID, keys.num) then
			for _,sound in pairs(sounds) do
				if keys.num == sound then
					if player.sound_use == 1 then
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.sound_use = 1
						Timers:CreateTimer(10, function() player.sound_use = 0 end)
					end
					local chat = LoadKeyValues("scripts/chat_wheel_rewards.txt")
					EmitGlobalSound(keys.num)

					Say(PlayerResource:GetPlayer(keys.PlayerID), "___"..chat["battlepass_"..keys.num], false)
				end
			end

			for _,spray in pairs(sprays) do
				if keys.num == spray then
					if player.spray_use == 1 then 
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.spray_use = 1
						Timers:CreateTimer(10, function() player.spray_use = 0 end)
					end
					local spray = ParticleManager:CreateParticle("particles/birzhapass/"..keys.num..".vpcf", PATTACH_WORLDORIGIN, nil)
					ParticleManager:SetParticleControl( spray, 0, PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetOrigin() )
					ParticleManager:ReleaseParticleIndex( spray )
					PlayerResource:GetSelectedHeroEntity(keys.PlayerID):EmitSound("Spraywheel.Paint")
				end
			end

			for _,toy in pairs(toys) do
				if keys.num == toy then

					if player.toy_use == 1 then 				
						EmitSoundOnClient("General.Cancel", player)
						return
					end
					if not IsInToolsMode() then
						player.toy_use = 1
						Timers:CreateTimer(20, function() player.toy_use = 0 end)
					end

					if keys.num == "reward22" then
						Item = CreateUnitByName("npc_dota_seasonal_dragon", PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetAbsOrigin() + RandomVector(RandomFloat(0,100)), true, PlayerResource:GetSelectedHeroEntity(keys.PlayerID), nil, PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetTeamNumber())
					end

					if keys.num == "reward74" then
						local RoflerPoint = PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetAbsOrigin()
						local RoflerItem = CreateItem( "item_treasure_chest_bp_fake", nil, nil )
						player.RoflerItem2 = CreateItemOnPositionForLaunch( RoflerPoint, RoflerItem )
						RoflerItem:LaunchLootInitialHeight( false, 0, 300, 0.75, RoflerPoint )
						Timers:CreateTimer(10, function() UTIL_Remove( player.RoflerItem2 ) end)
					end

					if keys.num == "reward88" then
						local RoflerPoint = PlayerResource:GetSelectedHeroEntity(keys.PlayerID):GetAbsOrigin()
						local RoflerItem = CreateItem( "item_bag_of_gold_bp_fake", nil, nil )
						player.RoflerItem2 = CreateItemOnPositionForLaunch( RoflerPoint, RoflerItem )
						RoflerItem:LaunchLootInitialHeight( false, 0, 300, 0.75, RoflerPoint )
						Timers:CreateTimer(10, function() UTIL_Remove( player.RoflerItem2 ) end)
					end
				end
			end
		else
			EmitSoundOnClient("General.Cancel", player)
		end
	end
end

CustomGameEventManager:RegisterListener( "SelectVO", Dynamic_Wrap(MEMESPASS,'SelectVO'))
LinkLuaModifier( "modifier_birzha_pet", "modifiers/modifier_birzha_pet", LUA_MODIFIER_MOTION_NONE )

MEMESPASS.BIRZHA_PREMIUM_PET = {}

function SpawnPetForHero(entity, model, effect)
	local id = entity:GetPlayerID()
	MEMESPASS.BIRZHA_PREMIUM_PET[id] = CreateUnitByName("unit_premium_pet", entity:GetAbsOrigin() + RandomVector(RandomFloat(0,100)), true, entity, nil, entity:GetTeamNumber())
	MEMESPASS.BIRZHA_PREMIUM_PET[id]:SetOwner(entity)
	MEMESPASS.BIRZHA_PREMIUM_PET[id]:AddNewModifier( MEMESPASS.BIRZHA_PREMIUM_PET[id], nil, "modifier_birzha_pet", {} )
	MEMESPASS.BIRZHA_PREMIUM_PET[id]:SetModel(model)
	MEMESPASS.BIRZHA_PREMIUM_PET[id]:SetOriginalModel(model)
	MEMESPASS.BIRZHA_PREMIUM_PET[id].effect = effect
	MEMESPASS.BIRZHA_PREMIUM_PET[id].particle = ParticleManager:CreateParticle(MEMESPASS.BIRZHA_PREMIUM_PET[id].effect, PATTACH_ABSORIGIN_FOLLOW, MEMESPASS.BIRZHA_PREMIUM_PET[id])
	if model == "models/insane/insane.vmdl" then
		MEMESPASS.BIRZHA_PREMIUM_PET[id]:SetModelScale(0.6)
	end
end
	
	
	
	
	
	
	
	
	
	
	
	